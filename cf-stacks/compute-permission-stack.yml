AWSTemplateFormatVersion: "2010-09-09"
Description: vaika-api - Compute permission

Parameters:
  Env:
    Type: String

Resources:
  ExecutionRole:
    Type: AWS::IAM::Role
    Properties:
      RoleName: !Join [ '', [ vaika-api-, !Ref Env, -ExecutionRole ] ]
      AssumeRolePolicyDocument:
        Statement:
          - Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
            Action: 'sts:AssumeRole'
      ManagedPolicyArns:
        - 'arn:aws:iam::aws:policy/AdministratorAccess'

  ExecutionRoleArnSSM:
    Type: AWS::SSM::Parameter
    Properties:
      Name: !Join [ '',[ /vaika-api/ , !Ref Env , /execution/role-arn ] ]
      Type: String
      Value: !GetAtt ExecutionRole.Arn
